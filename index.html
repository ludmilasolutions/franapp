<!DOCTYPE html>
<html lang="es-AR" class="no-js">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FranApp · Descubrí locales y pedí</title>
  <meta name="description" content="FranApp – Buscá por categoría, filtrá por entrega y pago. Hacé tu pedido en un toque."/>
  <link rel="icon" href="/assets/logo.png" />
  <style>
    :root{
      --bg:#0b1220; --bg-2:#0f172a; --card:#0f172a; --text:#e6edf3; --muted:#94a3b8; --border:#1e293b;
      --brand:#38bdf8; --accent:#fbbf24; --ok:#22c55e; --warn:#f97316;
      --ring: color-mix(in oklab, var(--brand) 35%, transparent);
      --glass: rgba(255,255,255,.06);
    }
    @media(prefers-color-scheme:light){
      :root{
        --bg:#f8fafc; --bg-2:#eef2f7; --card:#ffffff; --text:#0b1220; --muted:#6b7280; --border:#e5e7eb;
        --brand:#0ea5e9; --accent:#f59e0b; --ok:#16a34a; --warn:#f97316;
        --glass: rgba(255,255,255,.6);
      }
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,sans-serif;
      background:linear-gradient(180deg,var(--bg),var(--bg-2));color:var(--text)}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:1200px;margin:0 auto;padding:16px}
    header{position:sticky;top:0;background:var(--card);backdrop-filter:saturate(120%) blur(6px);
      border-bottom:1px solid var(--border);z-index:20}
    .hbar{display:flex;align-items:center;gap:12px;padding:12px 16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800}
    .brand .dot{width:10px;height:10px;background:var(--accent);border-radius:50%}
    .sp{flex:1}
    .btn{display:inline-flex;align-items:center;gap:8px;background:var(--brand);color:#0b1220;
      border:0;border-radius:12px;padding:10px 14px;font-weight:800;cursor:pointer}
    .btn.ghost{background:transparent;color:var(--brand);border:1px solid var(--brand)}
    /* Hero */
    .hero{display:grid;grid-template-columns:1.6fr 1fr;gap:18px;align-items:center;padding:20px 16px}
    .hero h1{font-size:clamp(24px,3.6vw,44px);margin:0 0 6px}
    .hero p{color:var(--muted);margin:.2rem 0 1.1rem}
    .card{background:var(--card);border:1px solid var(--border);border-radius:18px;padding:14px}
    /* Toolbar */
    .toolbar{display:grid;grid-template-columns:1fr .6fr .6fr .6fr;gap:10px;margin:12px 0}
    .input{display:flex;align-items:center;gap:8px;background:var(--card);border:1px solid var(--border);
      border-radius:12px;padding:10px 12px}
    .input input,.input select{border:0;outline:0;background:transparent;width:100%;color:var(--text)}
    .chip{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);padding:8px 12px;
      border-radius:999px;background:var(--card);cursor:pointer}
    .chip[data-active="1"]{border-color:var(--brand);background:color-mix(in oklab,var(--brand) 18%,transparent)}
    .muted{color:var(--muted)}
    /* Grid */
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:14px;margin:20px 0}
    .local{border:1px solid var(--border);border-radius:18px;background:var(--card);
      transition:transform .12s ease, box-shadow .12s ease}
    .local:hover{transform:translateY(-2px);box-shadow:0 16px 30px rgba(0,0,0,.25)}
    .banner{height:160px;background:#0b1220}
    .banner img{width:100%;height:100%;object-fit:cover}
    .pad{padding:12px}
    .row{display:flex;align-items:center;gap:12px}
    .logo{width:58px;height:58px;border-radius:16px;overflow:hidden;background:#0b1220}
    .logo img{width:100%;height:100%;object-fit:cover}
    .name{font-weight:900}
    .cat{font-size:.9rem;color:var(--muted)}
    .pill{display:inline-flex;align-items:center;gap:6px;font-size:.78rem;padding:6px 10px;
      border-radius:999px;border:1px solid var(--border)}
    .pill.ok{background:color-mix(in oklab,var(--ok) 16%,transparent);border-color:var(--ok)}
    .pill.warn{background:color-mix(in oklab,var(--warn) 16%,transparent);border-color:var(--warn)}
    .meta{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .footer{display:flex;align-items:center;justify-content:space-between;margin-top:12px}
    .link{font-weight:800;color:var(--brand)}
    .empty{padding:28px;text-align:center;border:1px dashed var(--border);border-radius:14px;color:var(--muted)}
  </style>
</head>
<body>
<header>
  <div class="hbar wrap">
    <div class="brand"><span class="dot"></span><span>FranApp</span></div>
    <div class="sp"></div>
    <a class="btn ghost" href="/registro.html">Registrar local</a>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <div>
      <h1>Encontrá tu local favorito y pedí en segundos</h1>
      <p>Filtrá por categoría, entrega y pago. Los destacados van primero y luego por curación.</p>
      <div class="toolbar">
        <label class="input"><input id="q" placeholder="Buscar..."/></label>
        <label class="input"><select id="cat"><option value="">Todas</option></select></label>
        <label class="input"><select id="sort">
          <option value="destacado">Destacados</option>
          <option value="orden">Curación</option>
          <option value="alf">Alfabético</option>
        </select></label>
        <button id="f-open" class="chip" data-active="0">Abiertos</button>
      </div>
    </div>
    <div class="card">
      <h3>¿Tenés un local?</h3>
      <p class="muted">Registralo gratis. Revisamos los datos y lo publicamos.</p>
      <a class="btn" href="/registro.html">Registrar mi local</a>
    </div>
  </section>

  <section id="list" class="grid"></section>
  <div id="empty" class="empty" style="display:none">No encontramos locales con esos filtros.</div>
</main>

<script>
const STATE = { locales: [], filters:{q:"",cat:"",abiertos:false,sort:"destacado"} };

async function init(){
  const idx = await fetch("/data/locales/index.json").then(r=>r.json()).catch(()=>[]);
  if(!idx.length){document.getElementById("empty").style.display="block";return;}
  for(const slug of idx){
    const item = await fetch(`/data/locales/${slug}.json`).then(r=>r.json()).catch(()=>null);
    if(item) STATE.locales.push(item);
  }
  renderList(STATE.locales);
}
init();

function renderList(arr){
  const list=document.getElementById("list");list.innerHTML="";
  for(const x of arr){
    const el=document.createElement("article");el.className="local";
    el.innerHTML=`<a class="banner"><img src="${x.imagenes?.banner||''}"></a>
    <div class="pad"><div class="row">
    <div class="logo">${x.imagenes?.logo?`<img src="${x.imagenes.logo}">`:''}</div>
    <div><div class="name">${x.nombre}</div><div class="cat">${x.categoria||''}</div></div>
    <span class="pill ${x.estado==='abierto'?'ok':'warn'}">${x.estado}</span>
    </div></div>`;
    list.appendChild(el);
  }
}
</script>
</body>
</html>
